ENV=dev
APP_HOST=0.0.0.0
APP_PORT=8081
DB_URL=postgresql+psycopg2://postgres:postgres@db:5432/taxi
JWT_SECRET=<REPLACE_WITH_SECRET>
JWT_EXPIRES_MINUTES=43200
ALLOWED_ORIGINS=*
AUTO_CREATE_SCHEMA=true
BASE_FARE_CENTS=1000
PER_KM_CENTS=500
ASSIGN_RADIUS_KM=5
AVG_SPEED_KMPH=30
SURGE_AVAILABLE_THRESHOLD=3
SURGE_STEP_PER_MISSING=0.25
SURGE_MAX_MULTIPLIER=2.0
# Maps & Geocoding (TomTom)
MAPS_INCLUDE_POLYLINE=false
TOMTOM_BASE_URL=https://api.tomtom.com
TOMTOM_API_KEY=
# Alternative var name for convenience:
# TOMTOM_API_KEY_TAXI=
TOMTOM_USE_TRAFFIC=true
TOMTOM_TIMEOUT_SECS=5.0
TOMTOM_MAX_RETRIES=2
TOMTOM_BACKOFF_SECS=0.25
TOMTOM_AVOID_CLOSED=true
TOMTOM_FLOW_ZOOM=10
TOMTOM_TRAFFIC_AUGMENT=true
TOMTOM_GEOCODER_CACHE_SECS=120
MAPS_ROUTE_CACHE_SECS=60
RATE_LIMIT_BACKEND=memory
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_AUTH_BOOST=2
REDIS_URL=redis://redis:6379/0
RATE_LIMIT_REDIS_PREFIX=rl_taxi
# MQTT (optional realtime broker)
MQTT_BROKER_HOST=
MQTT_BROKER_PORT=1883
MQTT_TOPIC_PREFIX=taxi
# JWT & Secrets (Rotation)
JWT_SECRET=change_me_in_prod
# Optional: previous secret for rotation
# JWT_SECRET_PREV=
# Or provide CSV of secrets (current first):
# JWT_SECRETS=
# Optional JWKS for RS256:
# JWT_JWKS_URL=
# Payments internal HMAC secret(s) for signing internal requests
# PAYMENTS_INTERNAL_SECRET=<REPLACE_WITH_INTERNAL_API_SECRET_FROM_PAYMENTS>
# PAYMENTS_INTERNAL_SECRET_PREV=
# PAYMENTS_INTERNAL_SECRETS=
# Payments integration (optional in dev)
PAYMENTS_BASE_URL=http://host.docker.internal:8080
PAYMENTS_INTERNAL_SECRET=<REPLACE_WITH_INTERNAL_API_SECRET_FROM_PAYMENTS>
PLATFORM_FEE_BPS=1000
FEE_WALLET_PHONE=+963999999999
TAXI_WALLET_ENABLED=true
# Pool wallet in Payments that holds drivers' taxi funds (dev/demo)
# When set, topups will transfer from driver's main wallet to this pool,
# and ride fees will be settled from this pool to the fee wallet.
TAXI_POOL_WALLET_PHONE=+963999999998
TAXI_ESCROW_WALLET_PHONE=+963999999997
PAYMENTS_CB_ENABLED=false
PAYMENTS_CB_THRESHOLD=3
PAYMENTS_CB_COOLDOWN_SECS=60
# Matching & Reassign
ASSIGNMENT_ACCEPT_TIMEOUT_SECS=120
REASSIGN_SCAN_LIMIT=200
REASSIGN_RADIUS_FACTOR=1.0
# If true, relax wallet min-balance when reassigning on stale/timeout (use with caution)
REASSIGN_RELAX_WALLET=false
ACCEPTED_START_TIMEOUT_SECS=300
# Admin endpoint hardening
ADMIN_IP_ALLOWLIST=
# Push (optional)
# FCM server key for sending push notifications to device tokens registered via /push/register
FCM_SERVER_KEY=

# Optional local services (docker compose profiles)
# MinIO credentials (if using `--profile storage`)
# MINIO_ROOT_USER=minioadmin
# MINIO_ROOT_PASSWORD=minioadmin
